{% extends 'party/base.html' %}
{% block content %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitation Form</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            function toggleFields() {
                var checkbox = document.getElementById("id_invitation");
    
                if (!checkbox) {
                    console.error("Checkbox with ID 'id_invitation' not found!");
                    return;
                }
    
                var addressField = document.getElementById("id_address")?.parentElement;
                var groupTypeField = document.getElementById("id_group_type")?.parentElement;
                var guestsField = document.getElementById("id_number_of_guests")?.parentElement;
                var cityField = document.getElementById("id_city")?.parentElement;
                var stateField = document.getElementById("id_state")?.parentElement;
                var zipCodeField = document.getElementById("id_zip_code")?.parentElement;
                var guestnamesField = document.getElementById("id_guest_names")?.parentElement;
                var checkbox2Field = document.getElementById("id_invite")?.parentElement; // Second checkbox
    
                function showElement(element) {
                    if (element) element.style.display = "block";
                }
    
                function hideElement(element) {
                    if (element) element.style.display = "none";
                }
    
                // Debugging: Log checkbox state
                console.log("Checkbox checked:", checkbox.checked);
    
                if (checkbox.checked) {
                    showElement(addressField);
                    showElement(cityField);
                    showElement(stateField);
                    showElement(zipCodeField);
                    hideElement(checkbox2Field); // Hide the second checkbox
                    hideElement(groupTypeField);
                    hideElement(guestsField);
                    hideElement(guestnamesField);
                } else {
                    hideElement(addressField);
                    hideElement(cityField);
                    hideElement(stateField);
                    hideElement(zipCodeField);
                    showElement(checkbox2Field); // Show the second checkbox
                    showElement(groupTypeField);
                    showElement(guestsField);
                    showElement(guestnamesField);
                }
            }
    
            // Run on page load to set correct field visibility
            toggleFields();
    
            // Add event listener to the checkbox
            var checkbox = document.getElementById("id_invitation");
            if (checkbox) {
                checkbox.addEventListener("change", toggleFields);
            } else {
                console.error("Checkbox 'id_invitation' not found.");
            }
        });
    </script>
</head>
<body>
    <h2>Fill the Invitation Form</h2>
    <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Submit</button>
    </form>
</body>
</html>

{% endblock %}